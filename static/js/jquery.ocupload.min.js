(function(n){n.fn.upload=function(t){return t=n.extend({name:"file",enctype:"multipart/form-data",action:"",autoSubmit:!0,onSubmit:function(){},onComplete:function(){},onSelect:function(){},params:{}},t),new n.ocupload(this,t)};n.ocupload=function(t,i){function a(){u.onSelect();u.autoSubmit&&u.submit()}var u=this,o=(new Date).getTime().toString().substr(8),s=n("<iframe><\/iframe>",{id:"iframe"+o,name:"iframe"+o}).css({display:"none"}),f=n("<form><\/form>",{method:"post",enctype:i.enctype,action:i.action,target:"iframe"+o}).css({margin:0,padding:0}),l=t.css("cursor"),r=n("<input>",{name:i.name,type:"file"}).css({position:"absolute",display:"block",cursor:l,opacity:0}),e,h,c;t.wrap("<div><\/div>");f.append(r);t.after(f);t.after(s);e=t.parent().css({position:"relative",height:t.outerHeight()+"px",width:t.outerWidth()+"px",overflow:"hidden",cursor:l,margin:0,padding:0});h=t.outerHeight();r.outerHeight(h);c=t.outerWidth();r.outerWidth(c);r.css({margin:"0",padding:"0",top:"0",left:"0"});e.mousemove(function(n){r.css({top:n.pageY-e.offset().top-h/2+"px",left:n.pageX-e.offset().left-c+30+"px"})});r.change(a);n.extend(this,{autoSubmit:!0,onSubmit:i.onSubmit,onComplete:i.onComplete,onSelect:i.onSelect,filename:function(){return r.attr("value")},params:function(t){if(t=t?t:!1,t)i.params=n.extend(i.params,t);else return i.params},name:function(n){if(n=n?n:!1,n)r.attr("name",value);else return r.attr("name")},action:function(n){if(n=n?n:!1,n)f.attr("action",n);else return f.attr("action")},enctype:function(n){if(n=n?n:!1,n)f.attr("enctype",n);else return f.attr("enctype")},set:function(t,i){function r(n,t){switch(n){case"name":u.name(t);break;case"action":u.action(t);break;case"enctype":u.enctype(t);break;case"params":u.params(t);break;case"autoSubmit":u.autoSubmit=t;break;case"onSubmit":u.onSubmit=t;break;case"onComplete":u.onComplete=t;break;case"onSelect":u.onSelect=t;break;default:throw new Error("[jQuery.ocupload.set] '"+n+"' is an invalid option.");}}i=i?i:!1;i?r(t,i):n.each(t,function(n,t){r(n,t)})},submit:function(){this.onSubmit();n.each(i.params,function(t,i){field=f.find("input:hidden[name='"+t+"']");field.length||(field=n('<input type="hidden">').attr("name",t).appendTo(f));field.val(i)});f.submit();s.unbind().load(function(){var i=document.getElementById(s.attr("name")),f=n(i.contentWindow.document.body).text(),t;u.onComplete(f);r.wrap("<div><\/div>");t=r.parent();r=n(t.html());r.change(a);t.replaceWith(r)})}})}})(jQuery);
/*
//# sourceMappingURL=jquery.ocupload.min.js.map
*/
